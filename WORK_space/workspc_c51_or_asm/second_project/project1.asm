ORG 0000H
    LJMP MAIN

ORG 0003H
    LJMP IN00

ORG 0013H
    LJMP IN11

MAIN:
    MOV P0, #00H      ; ???P0??0,?????
    MOV R0, #01H      ; ?????????
    MOV R2, #00H      ; ??K2????????
    SETB EA           ; ?????
    SETB EX0          ; ?????0
    SETB EX1          ; ?????1
    SETB IT0          ; ??????0??????
    SETB IT1          ; ??????1??????
    SETB PX0          ; ??????0?????????1
    SJMP $            ; ????????

IN00:                 ; ????0???? (K1)
    LCALL DELAY       ; ???
    MOV A, R0
    RL A
    MOV R0, A
    MOV P0, R0
    RETI

IN11:                 ; ????1???? (K2)
    LCALL DELAY       ; ???
    JB P3.3, TURN_OFF ; ??K2????,??????????
    CPL R2            ; ??R2??,???????
    MOV A, R2
    JZ STOP_FLOW      ; ??R2?0,?????
START_FLOW:
    MOV R1, #08H      ; ??????
LOOP:
    ACALL MY_DELAY    ; ?????
    MOV A, R0
    RL A
    MOV R0, A 
    MOV P0, R0
    LCALL MY_DELAY    ; ?????
    JB P3.3, TURN_OFF ; ??K2????,??????????
    DJNZ R1, LOOP     ; ??R1??0,????
    SJMP START_FLOW   ; ?????
STOP_FLOW:
    RETI

TURN_OFF:
    MOV R0, #00H
    MOV P0, #00H
    MOV R2, #00H
    RETI 

DELAY:
    MOV R4, #0FFH
DELAY1:
    MOV R5, #0FFH
DELAY2:
    DJNZ R5, DELAY2
    DJNZ R4, DELAY1
    RET

MY_DELAY:
    MOV R6, #04H
CYCLE:
    LCALL DELAY
    DJNZ R6, CYCLE
    RET

END
