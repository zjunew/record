C51 COMPILER V9.59.0.0   TRY                                                               05/29/2024 10:07:22 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE TRY
OBJECT MODULE PLACED IN .\Objects\try.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\forth_pro\try.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\try.lst) TABS(2) OBJECT(.\Objects\try.obj)

line level    source

   1          #include <stdio.h>
   2          #include <stdlib.h>
   3          #include <string.h>
   4          
   5          typedef struct node {
   6              double date;
   7              char opt;
   8              struct node* pre;
   9          }* pnode, node;
  10          
  11          typedef struct stack {
  12              pnode bottom;   //指向底部
  13              pnode top;  //指向头部
  14          }* pstack, stack;
  15          
  16          pstack create_stack(void) {
  17   1          pstack s = (pstack)malloc(sizeof(stack));
  18   1          s->bottom = s->top = (pnode)malloc(sizeof(node));
  19   1          return s;
  20   1      }
  21          
  22          void push(pstack s, char date) {
  23   1          pnode t = (pnode)malloc(sizeof(node));
  24   1          t->pre = s->top;
  25   1          t->date = date;
  26   1          s->top = t;
  27   1      }
  28          
  29          void pop(pstack s) {
  30   1          if (s->top == s->bottom) {
  31   2              printf("不能弹出，此时栈为空\n");
  32   2              return;
  33   2          }
  34   1          pnode t = s->top;
*** ERROR C141 IN LINE 34 OF ..\forth_pro\try.c: syntax error near 'pnode', expected '__asm'
*** ERROR C202 IN LINE 34 OF ..\forth_pro\try.c: 't': undefined identifier
  35   1          s->top = s->top->pre;
  36   1          free(t);
*** ERROR C202 IN LINE 36 OF ..\forth_pro\try.c: 't': undefined identifier
  37   1      }
  38          
  39          int empty(pstack s) {
  40   1          if (s->top == s->bottom) {
  41   2              return 1;
  42   2          }
  43   1          else {
  44   2              return 0;
  45   2          }
  46   1      }
  47          
  48          int top(pstack s) {
  49   1          return s->top->date;
  50   1      }
  51          
C51 COMPILER V9.59.0.0   TRY                                                               05/29/2024 10:07:22 PAGE 2   

  52          void push_num(pstack s, int date) {
  53   1          pnode t = (pnode)malloc(sizeof(node));
  54   1          t->pre = s->top;
  55   1          t->date = date;
  56   1          s->top = t;
  57   1      }
  58          
  59          int main(void) {
  60   1          pstack s_opt = create_stack();
  61   1          pstack s_num = create_stack();
  62   1          char str[100], suffix[100];
  63   1          int opt[100];
  64   1          memset(opt, 0, sizeof(opt));
  65   1          scanf("%s",str);
  66   1          opt['+'] = opt['-'] = 1;
  67   1          opt['*'] = opt['/'] = 2;
  68   1          opt['('] = opt[')'] = 0;
  69   1          int len = strlen(str), p = 0, flag = 1;
*** ERROR C141 IN LINE 69 OF ..\forth_pro\try.c: syntax error near 'int', expected '__asm'
*** ERROR C202 IN LINE 69 OF ..\forth_pro\try.c: 'len': undefined identifier
  70   1          //printf("%d\n",len);
  71   1          for (int i = 0; i < len; i++) {
*** ERROR C141 IN LINE 71 OF ..\forth_pro\try.c: syntax error near 'int', expected 'sizeof'
*** ERROR C202 IN LINE 71 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 71 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 71 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C141 IN LINE 71 OF ..\forth_pro\try.c: syntax error near ')', expected ';'
  72   2              if (str[i] <= '9' && str[i] >= '0') {
  73   3                  suffix[p++] = str[i];
*** ERROR C202 IN LINE 73 OF ..\forth_pro\try.c: 'p': undefined identifier
  74   3                  if (i+1 < len && str[i+1] <= '9' && str[i+1] >= '0');
*** ERROR C202 IN LINE 74 OF ..\forth_pro\try.c: 'i': undefined identifier
  75   3                  else    suffix[p++] = ' ';
*** ERROR C202 IN LINE 75 OF ..\forth_pro\try.c: 'p': undefined identifier
  76   3                  flag = 0;
*** ERROR C202 IN LINE 76 OF ..\forth_pro\try.c: 'flag': undefined identifier
  77   3                  continue;
*** ERROR C171 IN LINE 77 OF ..\forth_pro\try.c: 'continue': missing enclosing loop
  78   3              }
  79   2              else {
  80   3                  flag++;
*** ERROR C202 IN LINE 80 OF ..\forth_pro\try.c: 'flag': undefined identifier
  81   3              }
  82   2              if (str[i] == '(') {
*** ERROR C202 IN LINE 82 OF ..\forth_pro\try.c: 'i': undefined identifier
  83   3                  push(s_opt, str[i]);
*** ERROR C202 IN LINE 83 OF ..\forth_pro\try.c: 'i': undefined identifier
  84   3              }
  85   2              else if (str[i] == ')') {
*** ERROR C202 IN LINE 85 OF ..\forth_pro\try.c: 'i': undefined identifier
  86   3                  while(top(s_opt) != '(') {
  87   4                      //printf("%c\n", top(s_opt));
  88   4                      suffix[p++] = top(s_opt);
*** ERROR C202 IN LINE 88 OF ..\forth_pro\try.c: 'p': undefined identifier
  89   4                      pop(s_opt);
  90   4                  }
  91   3                  pop(s_opt);
  92   3                  //printf("1");
  93   3              }
  94   2              else if (empty(s_opt) && str[i] != ' ') {
*** ERROR C202 IN LINE 94 OF ..\forth_pro\try.c: 'i': undefined identifier
  95   3                  push(s_opt, str[i]);
C51 COMPILER V9.59.0.0   TRY                                                               05/29/2024 10:07:22 PAGE 3   

*** ERROR C202 IN LINE 95 OF ..\forth_pro\try.c: 'i': undefined identifier
  96   3              }
  97   2              else {
  98   3                  while(!empty(s_opt) && opt[str[i]] <= opt[top(s_opt)]) {
*** ERROR C202 IN LINE 98 OF ..\forth_pro\try.c: 'i': undefined identifier
  99   4                      suffix[p++] = top(s_opt);
*** ERROR C202 IN LINE 99 OF ..\forth_pro\try.c: 'p': undefined identifier
 100   4                      pop(s_opt);
 101   4                  }
 102   3                  push(s_opt, str[i]);
*** ERROR C202 IN LINE 102 OF ..\forth_pro\try.c: 'i': undefined identifier
 103   3              }
 104   2              if (flag >= 1) {
*** ERROR C202 IN LINE 104 OF ..\forth_pro\try.c: 'flag': undefined identifier
 105   3                  //    suffix[p++] = ' ';
 106   3              }
 107   2          }
 108   1          while(!empty(s_opt)) {
 109   2              suffix[p++] = top(s_opt);
*** ERROR C202 IN LINE 109 OF ..\forth_pro\try.c: 'p': undefined identifier
 110   2              pop(s_opt);
 111   2          }
 112   1          for (int i = 0; i < p-1; i++) {
*** ERROR C141 IN LINE 112 OF ..\forth_pro\try.c: syntax error near 'int', expected 'sizeof'
*** ERROR C202 IN LINE 112 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 112 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 112 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C141 IN LINE 112 OF ..\forth_pro\try.c: syntax error near ')', expected ';'
 113   2              printf("%c",suffix[i]);
 114   2          }
 115   1          printf("\n");
 116   1          pstack number_stack = create_stack();
*** ERROR C141 IN LINE 116 OF ..\forth_pro\try.c: syntax error near 'pstack', expected '__asm'
*** ERROR C202 IN LINE 116 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 117   1          flag = 0;
*** ERROR C202 IN LINE 117 OF ..\forth_pro\try.c: 'flag': undefined identifier
 118   1          double sum = 0, ans = 0;
*** ERROR C141 IN LINE 118 OF ..\forth_pro\try.c: syntax error near 'double', expected '__asm'
*** ERROR C202 IN LINE 118 OF ..\forth_pro\try.c: 'sum': undefined identifier
 119   1          for (int i = 0; i < p; i++) {
*** ERROR C141 IN LINE 119 OF ..\forth_pro\try.c: syntax error near 'int', expected 'sizeof'
*** ERROR C202 IN LINE 119 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 119 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C202 IN LINE 119 OF ..\forth_pro\try.c: 'i': undefined identifier
*** ERROR C141 IN LINE 119 OF ..\forth_pro\try.c: syntax error near ')', expected ';'
 120   2              if (suffix[i] <= '9' && suffix[i] >= '0') {
 121   3                  sum = sum*10 + (suffix[i]-'0');
*** ERROR C202 IN LINE 121 OF ..\forth_pro\try.c: 'sum': undefined identifier
 122   3                  flag = 1;
*** ERROR C202 IN LINE 122 OF ..\forth_pro\try.c: 'flag': undefined identifier
 123   3              }
 124   2              else {
 125   3                  if (flag == 1) {
*** ERROR C202 IN LINE 125 OF ..\forth_pro\try.c: 'flag': undefined identifier
 126   4                      push(number_stack, sum);
*** ERROR C202 IN LINE 126 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 127   4                      sum = 0;
*** ERROR C202 IN LINE 127 OF ..\forth_pro\try.c: 'sum': undefined identifier
 128   4                      flag = 0;
*** ERROR C202 IN LINE 128 OF ..\forth_pro\try.c: 'flag': undefined identifier
 129   4                  }
 130   3                  if (suffix[i] == '+' || suffix[i] == '-' || suffix[i] == '*' || suffix[i] == '/') {
C51 COMPILER V9.59.0.0   TRY                                                               05/29/2024 10:07:22 PAGE 4   

*** ERROR C202 IN LINE 130 OF ..\forth_pro\try.c: 'i': undefined identifier
 131   4                      double t1 = number_stack->top->date;
*** ERROR C202 IN LINE 131 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 132   4                      pop(number_stack);
*** ERROR C202 IN LINE 132 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 133   4                      if (suffix[i] == '+') {
*** ERROR C202 IN LINE 133 OF ..\forth_pro\try.c: 'i': undefined identifier
 134   5                          number_stack->top->date += t1;
*** ERROR C202 IN LINE 134 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 135   5                      }
 136   4                      else if (suffix[i] == '-') {
*** ERROR C202 IN LINE 136 OF ..\forth_pro\try.c: 'i': undefined identifier
 137   5                          number_stack->top->date -= t1;
*** ERROR C202 IN LINE 137 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 138   5                      }
 139   4                      else if (suffix[i] == '*') {
*** ERROR C202 IN LINE 139 OF ..\forth_pro\try.c: 'i': undefined identifier
 140   5                          number_stack->top->date *= t1;
*** ERROR C202 IN LINE 140 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 141   5                      }
 142   4                      else if (suffix[i] == '/') {
*** ERROR C202 IN LINE 142 OF ..\forth_pro\try.c: 'i': undefined identifier
 143   5                          number_stack->top->date /= t1;
*** ERROR C202 IN LINE 143 OF ..\forth_pro\try.c: 'number_stack': undefined identifier
 144   5                      }
 145   4                  }
 146   3              }
 147   2          }
 148   1          
 149   1      }
*** ERROR C241 IN LINE 149 OF ..\forth_pro\try.c: 'main': auto segment too large

C51 COMPILATION COMPLETE.  0 WARNING(S),  60 ERROR(S)
